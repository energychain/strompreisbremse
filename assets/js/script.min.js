const calculateBremse=function(){$("#bremseffekt").html("<span class='text-muted'>Berechnung läuft...</span>");const t=new Date("2023-01-01").getTime(),e=new Date("2023-01-31").getTime(),n=$("#inputJA").val();$.getJSON("https://api.corrently.io/v2.0/loadprofile/retrieve?from="+t+"&to="+e+"&consumption="+n,(function(t){const e=Math.round(t.output.sum.h0),n=Math.round(.8*e),r=Math.round(e+e*($("#consumptionChange").val()/100)),a=r*($("#inputPrice").val()/100),o=.4*n;let i=r-n;i<0&&(i=0);const d=i*($("#inputPrice").val()/100);let l='<table class="table table-condensed">';l+='<tr><td>Stromverbrauch Vorjahr</td><td align="right">'+e+" kWh</td></tr>",l+='<tr><td>&nbsp;&nbsp;&nbsp;davon 80%</td><td align="right">'+n+" kWh</td></tr>",l+='<tr><td>Stromverbrauch jetzt (Mehr/Minderverbrauch)</td><td align="right">'+r+" kWh</td></tr>",l+='<tr><td>Stromkosten ohne Bremse</td><td align="right">'+Math.round(a)+" €</td></tr>",l+="<tr><td>&nbsp;&nbsp;&nbsp;Bremse für "+n+' kWh</td><td align="right">'+Math.round(o)+" €</td></tr>",l+="<tr><td>&nbsp;&nbsp;&nbsp;Tarifpreis für "+i+' kWh</td><td align="right">'+Math.round(d)+" €</td></tr>",l+='<tr><td><strong>Stromkosten mit Bremse</strong></td><td align="right"><strong>'+Math.round(o+d)+" €</strong></td></tr>",l+='<tr><td>Effektiver Strompreis je kWh</td><td align="right">'+Math.round((o+d)/r*100)/100+" €/kWh</td></tr>",l+="</table>",$("#bremseffekt").html(l)}))};$(document).ready((function(){$(".btnJAT").on("click",(function(t){$("#inputJA").val($(t.currentTarget).attr("data")),calculateBremse()})),$("#fromDate").val((new Date).getFullYear()+"-01-01"),$("#toDate").val((new Date).toISOString().substring(0,10)),$("#frmSLP").on("submit",(function(t){t.preventDefault(),$(".hideOnCalc").attr("disabled","disabled");const e=new Date($("#fromDate").val()).getTime(),n=new Date($("#toDate").val()).getTime();return $.getJSON("https://api.corrently.io/v2.0/loadprofile/retrieve?from="+e+"&to="+n+"&consumption=1000",(function(t){const e=t.output.sum.h0,n=($("#toReading").val()-$("#fromReading").val())/1e3;$("#inputJA").val(Math.round(e*n)),setTimeout((function(){$(".hideOnCalc").removeAttr("disabled"),calculateBremse()}),2e3)})),!1})),$("#inputJA").on("change",calculateBremse),$("#consumptionChange").on("change",calculateBremse),$("#inputPrice").on("change",calculateBremse),calculateBremse()}));