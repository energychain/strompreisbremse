importScripts("https://storage.googleapis.com/workbox-cdn/releases/5.1.2/workbox-sw.js");const CACHE="pwabuilder-page",offlineFallbackPage="ToDo-replace-this-name.html";self.addEventListener("message",(t=>{t.data&&"SKIP_WAITING"===t.data.type&&self.skipWaiting()})),self.addEventListener("install",(async t=>{t.waitUntil(caches.open(CACHE).then((t=>t.add(offlineFallbackPage))))})),workbox.navigationPreload.isSupported()&&workbox.navigationPreload.enable(),self.addEventListener("fetch",(t=>{"navigate"===t.request.mode&&t.respondWith((async()=>{try{const e=await t.preloadResponse;if(e)return e;return await fetch(t.request)}catch(t){const e=await caches.open(CACHE);return await e.match(offlineFallbackPage)}})())}));const calculateBremse=function(){$("#bremseffekt").html("<span class='text-muted'>Berechnung läuft...</span>");const t=new Date("2023-01-01").getTime(),e=new Date("2023-01-31").getTime(),a=$("#inputJA").val();$.getJSON("https://api.corrently.io/v2.0/loadprofile/retrieve?from="+t+"&to="+e+"&consumption="+a,(function(t){const e=Math.round(t.output.sum.h0),a=Math.round(.8*e),r=Math.round(e+e*($("#consumptionChange").val()/100)),n=r*($("#inputPrice").val()/100),o=.4*a;let i=r-a;i<0&&(i=0);const s=i*($("#inputPrice").val()/100);let l='<table class="table table-condensed">';l+='<tr><td>Stromverbrauch Vorjahr</td><td align="right">'+e+" kWh</td></tr>",l+='<tr><td>&nbsp;&nbsp;&nbsp;davon 80%</td><td align="right">'+a+" kWh</td></tr>",l+='<tr><td>Stromverbrauch jetzt (Mehr/Minderverbrauch)</td><td align="right">'+r+" kWh</td></tr>",l+='<tr><td>Stromkosten ohne Bremse</td><td align="right">'+Math.round(n)+" €</td></tr>",l+="<tr><td>&nbsp;&nbsp;&nbsp;Bremse für "+a+' kWh</td><td align="right">'+Math.round(o)+" €</td></tr>",l+="<tr><td>&nbsp;&nbsp;&nbsp;Tarifpreis für "+i+' kWh</td><td align="right">'+Math.round(s)+" €</td></tr>",l+='<tr><td><strong>Stromkosten mit Bremse</strong></td><td align="right"><strong>'+Math.round(o+s)+" €</strong></td></tr>",l+='<tr><td>Effektiver Strompreis je kWh</td><td align="right">'+Math.round((o+s)/r*100)/100+" €/kWh</td></tr>",l+="</table>",$("#bremseffekt").html(l)}))};$(document).ready((function(){$(".btnJAT").on("click",(function(t){$("#inputJA").val($(t.currentTarget).attr("data")),calculateBremse()})),$("#fromDate").val((new Date).getFullYear()+"-01-01"),$("#toDate").val((new Date).toISOString().substring(0,10)),$("#frmSLP").on("submit",(function(t){t.preventDefault(),$(".hideOnCalc").attr("disabled","disabled");const e=new Date($("#fromDate").val()).getTime(),a=new Date($("#toDate").val()).getTime();return $.getJSON("https://api.corrently.io/v2.0/loadprofile/retrieve?from="+e+"&to="+a+"&consumption=1000",(function(t){const e=t.output.sum.h0,a=($("#toReading").val()-$("#fromReading").val())/1e3;$("#inputJA").val(Math.round(e*a)),setTimeout((function(){$(".hideOnCalc").removeAttr("disabled"),calculateBremse()}),2e3)})),!1})),$("#inputJA").on("change",calculateBremse),$("#consumptionChange").on("change",calculateBremse),$("#inputPrice").on("change",calculateBremse),calculateBremse()})),void 0!==navigator.serviceWorker&&navigator.serviceWorker.register("pwabuilder-sw.js");